<% if user_signed_in?  %>
  Turbolinks.clearCache()
  Turbolinks.visit("<%= response.location %>", { "action": "replace" })
<% else %>
  $('[data-behavior="devise-error-messages"]').html('<%= j render "devise/shared/error_messages", resource: resource %>');
  $('[data-behavior="flashes"]').html('<%= j render "layouts/flashes", flash: flash %>');
<% end %>