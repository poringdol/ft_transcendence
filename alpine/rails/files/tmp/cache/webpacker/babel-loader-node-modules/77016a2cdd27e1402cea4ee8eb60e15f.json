{"ast":null,"code":"$(function () {\n  window.App = {\n    Models: {},\n    Views: {},\n    Collections: {},\n    Router: {}\n  };\n\n  window.template = function (id) {\n    return _.template($('#' + id).html());\n  };\n\n  App.Models.Task = Backbone.Model.extend({\n    defaults: {\n      title: \"sleep\",\n      priority: 3\n    }\n  });\n  App.Collections.Task = Backbone.Collection.extend({\n    model: App.Models.Task\n  });\n  App.Views.Task = Backbone.View.extend({\n    initialize: function initialize() {\n      this.model.on('change', this.render, this);\n      this.model.on('destroy', this.remove, this);\n    },\n    tagName: 'li',\n    template: _.template($(\"#TaskTemplate\").html()),\n    //('TaskTemplate'),\n    render: function render() {\n      var template = this.template(this.model.toJSON()); // this.$el.css({\n      // \t'color': \"#007bff\",\n      // \t'padding'\t:\"10px\",\n      // \t'text-align':\"right\",\n      // });\n\n      this.$el.html(template);\n      return this;\n    },\n    events: {\n      'click title': 'showAlert',\n      'click #edit': 'editTask',\n      'click #delete': 'deleteTask',\n      'click #priority': 'priorityTask'\n    },\n    showAlert: function showAlert() {\n      var param = {\n        \"name\": \"Polya\",\n        \"country\": \"Russia\"\n      };\n      $.get('/bar', param, function (data) {\n        alert(\"Response is \" + data.response);\n      });\n    },\n    editTask: function editTask() {\n      var new_titile = prompt('New task title: ');\n      if (!new_titile) return;\n      this.model.set('title', new_titile);\n    },\n    remove: function remove() {\n      this.$el.remove();\n    },\n    deleteTask: function deleteTask() {\n      this.model.destroy();\n    },\n    priorityTask: function priorityTask() {\n      alert(\"Tou tapped on priority\");\n    }\n  });\n  App.Views.Tasks = Backbone.View.extend({\n    tagName: 'ul',\n    initialize: function initialize() {\n      this.collection.on('add', this.addOne, this);\n    },\n    render: function render() {\n      this.collection.each(this.addOne, this);\n      return this;\n    },\n    addOne: function addOne(task) {\n      var task_view = new App.Views.Task({\n        model: task\n      }); // this.$el.css({\n      // \t'padding': \"25px\",\n      // });\n\n      this.$el.append(task_view.render().el);\n    }\n  });\n  App.Views.AddTask = Backbone.View.extend({\n    el: '#AddTask',\n    events: {\n      'submit': 'submit'\n    },\n    initialize: function initialize() {},\n    submit: function submit(e) {\n      e.preventDefault();\n      var new_title = $(e.currentTarget).find('input[type=text]').val();\n      var param = {\n        \"intra\": new_title,\n        \"nick\": new_title\n      };\n      $.post('/create', param, function (data) {\n        alert(\"New user has been created\" + data.response);\n      });\n      var new_task = new App.Models.Task({\n        title: new_title\n      });\n      this.collection.add(new_task);\n      console.log(this.collection);\n    }\n  });\n  window.tasks = new App.Collections.Task([{\n    title: 'Trying to understand Rails',\n    priority: 4,\n    time: 12\n  }, {\n    title: 'Trying to understand Backbone',\n    priority: 2\n  }, {\n    title: 'Crying',\n    priority: 1\n  }, {\n    title: 'Crying2',\n    priority: 1\n  }]);\n  App.Router = Backbone.Router.extend({\n    routes: {\n      '': 'index',\n      '/index': 'index',\n      'read': 'read'\n    },\n    index: function index() {\n      window.tasks_view = new App.Views.Tasks({\n        collection: tasks\n      });\n      tasks_view.render();\n      $('.tasks').html(tasks_view.el);\n      var add_view = new App.Views.AddTask({\n        collection: tasks\n      });\n    },\n    read: function read() {\n      alert('Hello from read router');\n    }\n  });\n  new App.Router();\n  Backbone.history.start();\n}()); // (function () {\n// \twindow.App = {\n// \t\tModels: {},\n// \t\tViews: {},\n// \t\tCollections: {},\n// \t\tRouter: {},\n// \t\tinitialize: function () {\n// \t\t\talert(\"HELLO FROM BACKBONES! YES!\")\n// \t\t},\n// \t}\n// \tApp.Models.Person = Backbone.Model.extend({\n// \t\tdefaults: {\n// \t\t\tname: 'Anna',\n// \t\t\tage: 22,\n// \t\t\tjob: 'developer'\n// \t\t},\n// \t\twalk: function () {\n// \t\t\treturn this.get('name') + ' is walking'\n// \t\t}\n// \t});\n// \tvar person = new App.Models.Person({});\n// \tApp.Views.Person = Backbone.View.extend({\n// \t\ttagname: 'div',\n// \t\ttemplate: _.template($('#person-id').html()),\n// \t\trender: function () {\n// \t\t\tthis.$el.html(this.template(this.model.toJSON()));\n// \t\t\treturn this;\n// \t\t}\n// \t});\n// \tApp.Router = Backbone.Router.extend({\n// \t\troutes: {\n// \t\t\t''\t\t  : 'index',\n// \t\t\t'profile' : 'profile'\n// \t\t},\n// \t\tindex: function () {\n// \t\t\talert(\"you are on index page!\");\n// \t\t},\n// \t\tprofile: function () {\n// \t\t\talert(\"you are on profile page!\");\n// \t\t}\n// \t});\n// \tvar person_view = new App.Views.Person({ model: person, el: '#cool' });\n// \tvar rendered = person_view.render();\n// \t// new App.Router();\n// \t// Backbone.history.start();\n// \t// $('#cool').html(rendered.el);\n// }());\n// TEST","map":{"version":3,"sources":["/pingpong/app/javascript/test.js"],"names":["$","window","App","Models","Views","Collections","Router","template","id","_","html","Task","Backbone","Model","extend","defaults","title","priority","Collection","model","View","initialize","on","render","remove","tagName","toJSON","$el","events","showAlert","param","get","data","alert","response","editTask","new_titile","prompt","set","deleteTask","destroy","priorityTask","Tasks","collection","addOne","each","task","task_view","append","el","AddTask","submit","e","preventDefault","new_title","currentTarget","find","val","post","new_task","add","console","log","tasks","time","routes","index","tasks_view","add_view","read","history","start"],"mappings":"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","sourcesContent":["$(function () {\n\twindow.App = {\n\t\tModels: {},\n\t\tViews: {},\n\t\tCollections: {},\n\t\tRouter: {}\n\t}\n\twindow.template = function (id) {\n\t\treturn _.template($('#' + id).html());\n\t};\n\n\tApp.Models.Task = Backbone.Model.extend({\n\t\tdefaults: {\n\t\t\ttitle: \"sleep\",\n\t\t\tpriority: 3\n\t\t},\n\t});\n\n\tApp.Collections.Task = Backbone.Collection.extend({\n\t\tmodel: App.Models.Task\n\t});\n\n\tApp.Views.Task = Backbone.View.extend({\n\t\tinitialize: function () {\n\t\t\tthis.model.on('change', this.render, this);\n\t\t\tthis.model.on('destroy', this.remove, this);\n\t\t},\n\t\ttagName: 'li',\n\t\ttemplate: _.template($(\"#TaskTemplate\").html()),//('TaskTemplate'),\n\t\trender: function () {\n\t\t\tvar template = this.template(this.model.toJSON());\n\n\t\t\t// this.$el.css({\n\t\t\t// \t'color': \"#007bff\",\n\t\t\t// \t'padding'\t:\"10px\",\n\t\t\t// \t'text-align':\"right\",\n\t\t\t// });\n\n\t\t\tthis.$el.html(template);\n\n\t\t\treturn this;\n\t\t},\n\t\tevents: {\n\t\t\t'click title': 'showAlert',\n\t\t\t'click #edit': 'editTask',\n\t\t\t'click #delete': 'deleteTask',\n\t\t\t'click #priority': 'priorityTask'\n\t\t},\n\t\tshowAlert: function () {\n\t\t\tvar param = { \"name\": \"Polya\", \"country\": \"Russia\" };\n\t\t\t$.get('/bar', param, data => {\n\t\t\t\talert(\"Response is \" + data.response);\n\t\t\t});\n\t\t},\n\t\teditTask: function () {\n\t\t\tvar new_titile = prompt('New task title: ');\n\t\t\tif (!new_titile) return;\n\t\t\tthis.model.set('title', new_titile);\n\t\t},\n\t\tremove: function () {\n\t\t\tthis.$el.remove();\n\t\t},\n\t\tdeleteTask: function () {\n\t\t\tthis.model.destroy();\n\t\t},\n\t\tpriorityTask: function () {\n\t\t\talert(\"Tou tapped on priority\");\n\t\t}\n\t});\n\n\tApp.Views.Tasks = Backbone.View.extend({\n\t\ttagName: 'ul',\n\t\tinitialize: function () {\n\t\t\tthis.collection.on('add', this.addOne, this);\n\t\t},\n\t\trender: function () {\n\t\t\tthis.collection.each(this.addOne, this);\n\t\t\treturn this;\n\t\t},\n\t\taddOne: function (task) {\n\t\t\tvar task_view = new App.Views.Task({ model: task });\n\t\t\t\n\t\t\t// this.$el.css({\n\t\t\t// \t'padding': \"25px\",\n\t\t\t// });\n\t\t\tthis.$el.append(task_view.render().el);\n\t\t}\n\t});\n\n\tApp.Views.AddTask = Backbone.View.extend({\n\t\tel: '#AddTask',\n\t\tevents: {\n\t\t\t'submit': 'submit'\n\t\t},\n\t\tinitialize: function () {\n\t\t},\n\t\tsubmit: function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar new_title = $(e.currentTarget).find('input[type=text]').val();\n\t\t\tconst param = {\"intra\" : new_title, \"nick\" : new_title}\n            $.post('/create', param, function(data) {\n                alert(\"New user has been created\" + data.response)\n            })\n\t\t\tvar new_task = new App.Models.Task({ title: new_title });\n\t\t\tthis.collection.add(new_task);\n\t\t\tconsole.log(this.collection);\n\t\t}\n\t});\n\n\twindow.tasks = new App.Collections.Task([\n\t\t{\n\t\t\ttitle: 'Trying to understand Rails',\n\t\t\tpriority: 4,\n\t\t\ttime: 12\n\t\t},\n\t\t{\n\t\t\ttitle: 'Trying to understand Backbone',\n\t\t\tpriority: 2\n\t\t},\n\t\t{\n\t\t\ttitle: 'Crying',\n\t\t\tpriority: 1\n\t\t},\n\t\t{\n\t\t\ttitle: 'Crying2',\n\t\t\tpriority: 1\n\t\t}\n\t]);\n\n\t\n\n\tApp.Router = Backbone.Router.extend({\n\t\troutes: {\n\t\t\t'': 'index',\n\t\t\t'/index': 'index',\n\t\t\t'read': 'read'\n\t\t},\n\t\tindex: function () {\n\t\t\twindow.tasks_view = new App.Views.Tasks({ collection: tasks });\n\t\t\ttasks_view.render();\n\t\t\t$('.tasks').html(tasks_view.el);\n\t\t\tvar add_view = new App.Views.AddTask({ collection: tasks });\n\t\t},\n\t\tread: function () {\n\t\t\talert('Hello from read router');\n\t\t}\n\t});\n\tnew App.Router();\n\tBackbone.history.start();\n}());\n\n// (function () {\n// \twindow.App = {\n// \t\tModels: {},\n// \t\tViews: {},\n// \t\tCollections: {},\n// \t\tRouter: {},\n\t\t\n// \t\tinitialize: function () {\n// \t\t\talert(\"HELLO FROM BACKBONES! YES!\")\n// \t\t},\n// \t}\n\n// \tApp.Models.Person = Backbone.Model.extend({\n// \t\tdefaults: {\n// \t\t\tname: 'Anna',\n// \t\t\tage: 22,\n// \t\t\tjob: 'developer'\n// \t\t},\n// \t\twalk: function () {\n// \t\t\treturn this.get('name') + ' is walking'\n// \t\t}\n// \t});\n\n// \tvar person = new App.Models.Person({});\n\n// \tApp.Views.Person = Backbone.View.extend({\n// \t\ttagname: 'div',\n// \t\ttemplate: _.template($('#person-id').html()),\n// \t\trender: function () {\n// \t\t\tthis.$el.html(this.template(this.model.toJSON()));\n\t\t\t\n// \t\t\treturn this;\n// \t\t}\n// \t});\n\n// \tApp.Router = Backbone.Router.extend({\n// \t\troutes: {\n// \t\t\t''\t\t  : 'index',\n// \t\t\t'profile' : 'profile'\n// \t\t},\n// \t\tindex: function () {\n// \t\t\talert(\"you are on index page!\");\n// \t\t},\n// \t\tprofile: function () {\n// \t\t\talert(\"you are on profile page!\");\n// \t\t}\n// \t});\n\n// \tvar person_view = new App.Views.Person({ model: person, el: '#cool' });\n// \tvar rendered = person_view.render();\n// \t// new App.Router();\n// \t// Backbone.history.start();\n\n// \t// $('#cool').html(rendered.el);\n// }());\n\n// TEST\n"]},"metadata":{},"sourceType":"module"}