{"ast":null,"code":"$(function () {\n  window.App = {\n    Models: {},\n    Views: {},\n    Collections: {},\n    Router: {}\n  };\n  App.Models.Guild = Backbone.Model.extend({\n    urlRoot: 'http://localhost:3000/guilds',\n    initialize: function initialize(curr_guild) {\n      this.id = curr_guild.id;\n      this.name = curr_guild.name;\n      this.anagram = curr_guild.anagram;\n      this.score = curr_guild.score;\n      this.owner_id = curr_guild.owner_id;\n      this.created_at = curr_guild.created_at;\n      this.updated_at = curr_guild.updated_at;\n    }\n  });\n  App.Collections.Guild = Backbone.Collection.extend({\n    model: App.Models.Guild,\n    url: 'http://localhost:3000/guilds',\n    initialize: function initialize() {\n      this.fetch();\n    }\n  });\n  App.Views.Guild = Backbone.View.extend({\n    // tagName: 'li',\n    // className: 'GuildButton list-group-item list-group-item-action',\n    // tagName: 'span',\n    // className: 'GuildCard',\n    templateList: _.template($(\"#GuildListTemplate\").html()),\n    templateCard: _.template($(\"#GuildCardTemplate\").html()),\n    initialize: function initialize() {\n      this.model.on('destroy', this.remove, this);\n      this.model.on('click', this.showCard, this);\n    },\n    events: {\n      'click #delete_guild': 'delete_guild',\n      'click #GuildNameList': 'showCard'\n    },\n    render: function render() {\n      var template = this.templateList(this.model); // this.$el.css({ 'display': \"inline-block\", 'margin': '10px' });\n\n      this.$el.append(template);\n      return this;\n    },\n    showCard: function showCard() {\n      var template = this.templateCard(this.model);\n      $('#GuildCard').html(template);\n      return this;\n    },\n    remove: function remove() {\n      this.$el.remove();\n    },\n    delete_guild: function delete_guild() {\n      var promise = this.model.destroy([], {\n        dataType: \"text\"\n      });\n      $.when(promise).done(_.bind(function (data) {\n        $('#GuildForm').css({\n          \"display\": \"block\"\n        });\n      }, this));\n    }\n  });\n  App.Views.Guilds = Backbone.View.extend({\n    className: 'list-group',\n    initialize: function initialize() {\n      this.collection.on('add', this.addOne, this);\n      this.collection.on('change', this.addOne, this);\n      this.render();\n    },\n    render: function render() {\n      this.collection.each(this.addOne, this);\n      $('#GuildList').append(this.el);\n      return this;\n    },\n    addOne: function addOne(guild) {\n      console.log(guild.name);\n      var guildView = new App.Views.Guild({\n        model: guild\n      });\n      this.$el.append(guildView.render().el);\n    }\n  });\n  App.Views.NewGuild = Backbone.View.extend({\n    template: _.template($(\"#GuildFormTemplate\").html()),\n    // initialize: function () {\n    // \tthis.$el.html(this.template)\n    // },\n    events: {\n      'submit': 'submit'\n    },\n    render: function render() {\n      this.$el.html(this.template);\n      $('#GuildForm').html(this.el);\n    },\n    submit: function submit(e) {\n      e.preventDefault();\n      var guild = {\n        name: $(e.currentTarget).find('input[id=guildFormName]').val(),\n        anagram: $(e.currentTarget).find('input[id=guildFormAnagram]').val()\n      };\n      new_guild = new App.Models.Guild(guild);\n      var promise = new_guild.save([], {\n        dataType: \"text\"\n      });\n      $.when(promise).done(_.bind(function (data) {\n        alert('success');\n        this.collection.fetch();\n        $('#GuildForm').css({\n          \"display\": \"none\"\n        });\n      }, this));\n      $.when(promise).fail(function (resp) {\n        alert(resp.responseText);\n      }); // new_guild.save({}, {\n      // \tdataType:\"text\",\n      // \tsuccess: function (model, response) {\n      // \t\talert(\"success\");\n      // \t\tthis.collection.fetch()\n      // \t},\n      // \terror: function (model, response) {\n      // \t\talert(\"error\");\n      // \t}\n      // });\n      // .success(response => {\n      // \talert('success')\n      // })\n      // .then(res => res.ok ? alert('ok') : Promise.reject(res))\n      // .then(resp => {\n      // \tconsole.log('then')\n      // \tconsole.log(resp)\n      // })\n      // .catch(response => {\n      // \tconsole.log('catch')\n      // \t// console.log(response)\n      // \tthis.collection.fetch()\n      // })\n      // new_guild.changedAttributes()\n      // this.collection.fetch()\n      // alert(new_guild.name + new_guild.owner_id)\n      // new_guild.sync()\n      // alert(new_guild.name + new_guild.owner_id)\n      // fetch(\"http://localhost:3000/create_new_guild\", {\n      // \tmethod: \"POST\",\n      // \theaders: {\n      // \t\t'Accept': 'application/json',\n      // \t\t'Content-Type': 'application/json'\n      // \t},\n      // \tbody: JSON.stringify(guild)\n      // })\n      // .then(res => res.ok ? res.json() : Promise.reject(res))\n      // .then(user => {\n      // \tnew_guild = new App.Models.Guild(guild);\n      // \tthis.collection.add(new_user);\n      // })\n      // .catch(() => {\n      // \talert('Error! Unable to create guild!')\n      // })\n    }\n  });\n  col = new App.Collections.Guild();\n  form = new App.Views.NewGuild({\n    collection: col\n  });\n  form.render();\n  guilds_view = new App.Views.Guilds({\n    collection: col\n  });\n}());","map":{"version":3,"sources":["/pingpong/app/javascript/packs/index.js"],"names":["$","window","App","Models","Views","Collections","Router","Guild","Backbone","Model","extend","urlRoot","initialize","curr_guild","id","name","anagram","score","owner_id","created_at","updated_at","Collection","model","url","fetch","View","templateList","_","template","html","templateCard","on","remove","showCard","events","render","$el","append","delete_guild","promise","destroy","dataType","when","done","bind","data","css","Guilds","className","collection","addOne","each","el","guild","console","log","guildView","NewGuild","submit","e","preventDefault","currentTarget","find","val","new_guild","save","alert","fail","resp","responseText","col","form","guilds_view"],"mappings":"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","sourcesContent":["$(function () {\n\twindow.App = {\n\t\tModels: {},\n\t\tViews: {},\n\t\tCollections: {},\n\t\tRouter: {}\n\t};\n\n\tApp.Models.Guild = Backbone.Model.extend({\n\t\turlRoot: 'http://localhost:3000/guilds',\n\t\tinitialize: function (curr_guild) {\n\t\t\tthis.id = curr_guild.id;\n\t\t\tthis.name = curr_guild.name;\n\t\t\tthis.anagram = curr_guild.anagram;\n\t\t\tthis.score = curr_guild.score;\n\t\t\tthis.owner_id = curr_guild.owner_id;\n\t\t\tthis.created_at = curr_guild.created_at;\n\t\t\tthis.updated_at = curr_guild.updated_at;\n\t\t}\n\t});\n\n\tApp.Collections.Guild = Backbone.Collection.extend({\n\t\tmodel: App.Models.Guild,\n\t\turl: 'http://localhost:3000/guilds',\n\t\tinitialize: function () {\n\t\t\tthis.fetch();\n\t\t}\n\t});\n\t\n\tApp.Views.Guild = Backbone.View.extend({\n\t\t// tagName: 'li',\n\t\t// className: 'GuildButton list-group-item list-group-item-action',\n\t\t// tagName: 'span',\n\t\t// className: 'GuildCard',\n\t\ttemplateList: _.template($(\"#GuildListTemplate\").html()),\n\t\ttemplateCard: _.template($(\"#GuildCardTemplate\").html()),\n\t\tinitialize: function () {\n\t\t\tthis.model.on('destroy', this.remove, this);\n\t\t\tthis.model.on('click', this.showCard, this);\n\t\t},\n\t\tevents: {\n\t\t\t'click #delete_guild': 'delete_guild',\n\t\t\t'click #GuildNameList' : 'showCard'\n\t\t},\n\t\trender: function () {\n\t\t\tvar template = this.templateList(this.model);\n\t\t\t// this.$el.css({ 'display': \"inline-block\", 'margin': '10px' });\n\t\t\tthis.$el.append(template);\n\t\t\treturn this;\n\t\t},\n\t\tshowCard: function () {\n\t\t\tvar template = this.templateCard(this.model);\n\t\t\t$('#GuildCard').html(template);\n\t\t\treturn this;\n\t\t},\n\t\tremove: function () {\n\t\t\tthis.$el.remove();\n\t\t},\n\t\tdelete_guild: function () {\n\t\t\t\n\t\t\tvar promise = this.model.destroy([], {\n\t\t\t\tdataType: \"text\"\n\t\t\t})\n\t\t\t\n\t\t\t$.when(promise).done(\n\t\t\t\t_.bind(function (data) {\n\t\t\t\t\t$('#GuildForm').css({ \"display\": \"block\" });\n\t\t\t\t}, this)\n\t\t\t\t);\n\t\t}\n\t})\n\n\n\t\t\n\tApp.Views.Guilds = Backbone.View.extend({\n\t\t\tclassName: 'list-group',\n\t\t\tinitialize: function () {\n\t\t\tthis.collection.on('add', this.addOne, this);\n\t\t\tthis.collection.on('change', this.addOne, this);\n\t\t\tthis.render();\n\t\t},\n\t\trender: function () {\n\t\t\tthis.collection.each(this.addOne, this);\n\t\t\t$('#GuildList').append(this.el);\n\t\t\treturn this;\n\t\t},\n\t\taddOne: function (guild) {\n\t\t\tconsole.log(guild.name);\n\t\t\tvar guildView = new App.Views.Guild({ model: guild });\n\t\t\tthis.$el.append(guildView.render().el);\n\t\t}\n\t});\n\n\tApp.Views.NewGuild = Backbone.View.extend({\n\t\ttemplate: _.template($(\"#GuildFormTemplate\").html()),\n\t\t// initialize: function () {\n\t\t// \tthis.$el.html(this.template)\n\t\t// },\n\t\tevents: {\n\t\t\t'submit': 'submit'\n\t\t},\n\t\trender: function () {\n\t\t\tthis.$el.html(this.template) \n\t\t\t$('#GuildForm').html(this.el);\n\t\t},\n\t\tsubmit: function (e) {\n\t\t\te.preventDefault();\n\t\t\tlet guild = {\n\t\t\t\tname: $(e.currentTarget).find('input[id=guildFormName]').val(),\n\t\t\t\tanagram: $(e.currentTarget).find('input[id=guildFormAnagram]').val()\n\t\t\t}\n\t\t\tnew_guild = new App.Models.Guild(guild);\n\n\t\t\tvar promise = new_guild.save([], {\n\t\t\t\tdataType: \"text\"\n\t\t\t})\n\n\t\t\t$.when(promise).done(\n\t\t\t\t_.bind(function (data) {\n    \t\t\t\talert('success');\n\t\t\t\t\tthis.collection.fetch()\n\t\t\t\t\t$('#GuildForm').css({ \"display\": \"none\" });\n\t\t\t\t}, this)\n\t\t\t);\n\n\t\t\t$.when(promise).fail(function (resp) {\n\t\t\t\talert(resp.responseText);\n\t\t\t});\n\n\n\t\t\t// new_guild.save({}, {\n\t\t\t// \tdataType:\"text\",\n\t\t\t// \tsuccess: function (model, response) {\n\t\t\t// \t\talert(\"success\");\n\t\t\t// \t\tthis.collection.fetch()\n\t\t\t// \t},\n\t\t\t// \terror: function (model, response) {\n\t\t\t// \t\talert(\"error\");\n\t\t\t// \t}\n\t\t\t// });\n\n\n\t\t\t// .success(response => {\n\t\t\t// \talert('success')\n\t\t\t// })\n\t\t\t// .then(res => res.ok ? alert('ok') : Promise.reject(res))\n\t\t\t// .then(resp => {\n\t\t\t// \tconsole.log('then')\n\t\t\t// \tconsole.log(resp)\n\t\t\t// })\n\t\t\t// .catch(response => {\n\t\t\t// \tconsole.log('catch')\n\t\t\t// \t// console.log(response)\n\t\t\t// \tthis.collection.fetch()\n\t\t\t// })\n\t\t\t// new_guild.changedAttributes()\n\t\t\t// this.collection.fetch()\n\t\t\t// alert(new_guild.name + new_guild.owner_id)\n\t\t\t// new_guild.sync()\n\t\t\t// alert(new_guild.name + new_guild.owner_id)\n\t\t\t// fetch(\"http://localhost:3000/create_new_guild\", {\n\t\t\t// \tmethod: \"POST\",\n\t\t\t// \theaders: {\n\t\t\t// \t\t'Accept': 'application/json',\n\t\t\t// \t\t'Content-Type': 'application/json'\n\t\t\t// \t},\n\t\t\t// \tbody: JSON.stringify(guild)\n\t\t\t// })\n\t\t\t// .then(res => res.ok ? res.json() : Promise.reject(res))\n\t\t\t// .then(user => {\n\t\t\t// \tnew_guild = new App.Models.Guild(guild);\n\t\t\t// \tthis.collection.add(new_user);\n\t\t\t// })\n\t\t\t// .catch(() => {\n\t\t\t// \talert('Error! Unable to create guild!')\n\t\t\t// })\n\t\t},\n\n\t})\n\n\tcol = new App.Collections.Guild();\n\tform = new App.Views.NewGuild({ collection: col });\n\tform.render();\n\tguilds_view = new App.Views.Guilds({ collection: col});\n\t\n}());"]},"metadata":{},"sourceType":"module"}