{"ast":null,"code":"import consumer from \"./consumer\"; // let subscribe = 0;\n// document.addEventListener('turbolinks:load', () => {\n//   const room_element = document.getElementById('room-id');\n//   const room_id = (room_element != null) ? room_element.getAttribute('data-room-id') : -1;\n//   if (subscribe)\n//     consumer.subscriptions.remove(subscribe)\n//   subscribe = consumer.subscriptions.create({ channel: \"RoomChannel\", room_id: room_id }, {\n//     connected() {\n//       if (room_id > 0)\n//         console.log(\"Connected to room \" + room_id);\n//     },\n//     disconnected() {\n//       if (room_id > 0)\n//         console.log(\"Disconnected from room \" + room_id);\n//     },\n//     received(data) {\n//       const user_element = document.getElementById('user-id');\n//       const user_id = Number(user_element.getAttribute('data-user-id'));\n//       let html;\n//       let blocked = [];\n//       fetch(\"/block_list\")\n//       .then(res => res.ok ? res.json() : Promise.reject(res))\n//       .then(function(blocked_user) {\n//         for (var i = 0; blocked_user.length != i; i++) {\n//           blocked.push(blocked_user[i].blocked_user_id)\n//         }\n//         if (user_id === data.message.user_id) {\n//           html = data.mine;\n//           const messageContainer = document.getElementById('messages');\n//           messageContainer.innerHTML = messageContainer.innerHTML + html;\n//         } else if (blocked.includes(data.message.user_id) === false) {\n//           html = data.theirs;\n//           const messageContainer = document.getElementById('messages');\n//           messageContainer.innerHTML = messageContainer.innerHTML + html;\n//         }\n//       })\n//     }\n//   });\n// })","map":{"version":3,"sources":["/pingpong/app/javascript/channels/room_channel.js"],"names":["consumer"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,YAArB,C,CAEA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import consumer from \"./consumer\"\n\n// let subscribe = 0;\n\n// document.addEventListener('turbolinks:load', () => {\n\n//   const room_element = document.getElementById('room-id');\n//   const room_id = (room_element != null) ? room_element.getAttribute('data-room-id') : -1;\n\n//   if (subscribe)\n//     consumer.subscriptions.remove(subscribe)\n\n//   subscribe = consumer.subscriptions.create({ channel: \"RoomChannel\", room_id: room_id }, {\n//     connected() {\n//       if (room_id > 0)\n//         console.log(\"Connected to room \" + room_id);\n//     },\n\n//     disconnected() {\n//       if (room_id > 0)\n//         console.log(\"Disconnected from room \" + room_id);\n//     },\n\n//     received(data) {\n//       const user_element = document.getElementById('user-id');\n//       const user_id = Number(user_element.getAttribute('data-user-id'));\n\n//       let html;\n//       let blocked = [];\n\n//       fetch(\"/block_list\")\n//       .then(res => res.ok ? res.json() : Promise.reject(res))\n//       .then(function(blocked_user) {\n\n//         for (var i = 0; blocked_user.length != i; i++) {\n//           blocked.push(blocked_user[i].blocked_user_id)\n//         }\n\n//         if (user_id === data.message.user_id) {\n//           html = data.mine;\n//           const messageContainer = document.getElementById('messages');\n//           messageContainer.innerHTML = messageContainer.innerHTML + html;\n//         } else if (blocked.includes(data.message.user_id) === false) {\n//           html = data.theirs;\n//           const messageContainer = document.getElementById('messages');\n//           messageContainer.innerHTML = messageContainer.innerHTML + html;\n//         }\n//       })\n//     }\n//   });\n// })\n"]},"metadata":{},"sourceType":"module"}